# CHESS-GAME
#### Video Demo:  <https://www.youtube.com/watch?v=xJflVeIHeBA>
#### Description: The game presented is a simple game that allows two players to play chess. It allows the board to flip after every move, which can be disabled. It accounts for all possible moves in a position, including castling but not en passant, and it cannot recognize stalemates or draws. It recognizes which side has won by determining whether a side still has its king (A king in checkmate is guaranteed to lose it on the next turn anyway). It does not use any libraries.

#### The HTML file, index.html, simply creates the canvas which the game will be played on, as well as a button to control board flipping and text to display the winner once the game is won.

#### THe CSS file, styles.css, organizes the canvas, the button, and the text for winning, as well as setting some background colours and borders.

#### The first JS file, main.js, first defines the variables that will be used to create the game as well as variables that will be used to decide whose turn it is, and control board flipping, if enabled. It then loads the images of each of the pieces, to prevent them from reloading in every game loop. It then creates an array containing all of the pieces, where each piece is an object with a set column and row, colour, whether the player has currently selected it, and for pawns, rooks, and kings, whether it has moved (To decide whether the piece can still castle or move two squares). The next function, the drawBoard() function, creates the board with for loops to create a checkered pattern. It accounts for whether or not the board is being flipped, and uses that to determine which squares should be coloured. The drawPieces function simply creates the pieces at their position on the board, using their column and row properties. The checkTurn function changes the row positions of every piece when a move is made if board flipping is on. This simulates the feeling that the board is actually flipping. The draw function clears the canvas after every frame, and calls the functions that draw the board and pieces. It also controls when the game ends. The next function detects when a click is made on the board, and it uses that to make a move in the functions.js file. The last function simply detects clicks on the button to change whether or not board flipping occurs.

#### The second JS file, functions.js, defines the functions that change the positions of pieces and allow for moves to be made. The first function, possibleMoves(), defines what a selected piece can and cannot do in every turn. It interacts with the makeMove function to determine which piece is selected. When a piece is selected(via a click), the possibleMoves function first checks the which piece it is. It then uses this information to find which moves the piece can make(for example, a bishop would move diagonally, a rook vertically and horizontally, a queen a combination of both, etc.). It will check whether or not a king or pawn has moved, which would allow them to castle or move two squares, respectively. The function uses for loops that go in one direction at a time, that stop when a piece is detected. If the piece can capture(pawns cannot capture a piece infront of it and pieces cannot capture the same colour) it will also include that square in possible moves. The function will account for which colour a pawn is on, as pawns cannot move backwards. For knight and king moves, it was easier to simply define which moves they could make inside the possible array, as they always have the same moves provided a friendly piece is not on that square. The function then clears any negative or overly high values, and returns an array containing the moves the selected piece can make. The second function, the makeMove function, occurs before the possibleMoves function, and is triggered by a click on the canvas. First, the function gets the exact coordinates of the click make on the canvas. It then divides the number by 80(The number of pixels in a square on the chessboard as defined in the main.js file) and rounds down, allowing us to get the coordinates of the square. It then first uses a for loop to check if a piece has already been selected. If not, it sets the piece at that square to be selected. If a click is made on an empty square, any previously selected pieces are unselected. If a piece is selected already, it uses the possibleMoves function to determine if the square that the piece is moving to is a legal square. If it is, the program checks if there is an opposite coloured piece on that square, and removes it(if it is a king a winner is declared). The code then checks if the piece that is moving is a king, in which case we would need to account for castling possibilities. If a castle has been performed, the rook is moved alongside the king, and the king can no longer castle. The piece is then moved to its destination square via the previously defined piecex and piecey. Afterwards, if a pawn has made it to the other side of the board, it becomes a queen, and if a pawn or rook has moved, it can no longer castle or move two squares at once. It then changes the curren turn to the opposite colour, and unselects the piece that made the move.